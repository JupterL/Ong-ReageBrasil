const ModChat={init:function e(){console.log("M\xf3dulo de Chat carregado.")},enviarMensagem:function e(t){t&&console.log(`[CHAT] Enviando mensagem: ${t}`)}},ModTemplates=function(){let e=[{titulo:"Reconstru\xe7\xe3o no Sul",descricao:"Restaura\xe7\xe3o de casas atingidas por enchentes.",imagem:"../media/projeto-reconstrucao.jpg",tag:"Reconstru\xe7\xe3o",link:"projetos.html#reconstrucao"},{titulo:"Resgate Animal Urbano",descricao:"A\xe7\xf5es de resgate e cuidados veterin\xe1rios em \xe1reas urbanas.",imagem:"../media/projeto-resgate-animal.jpg",tag:"Veterin\xe1ria",link:"projetos.html#animal"},{titulo:"Apoio Psicol\xf3gico M\xf3vel",descricao:"Suporte emocional e atendimento emergencial em campo.",imagem:"../media/projeto-psicologico.jpg",tag:"Humanit\xe1rio",link:"projetos.html#apoio"}];function t(e){return`
            <article class="card-projeto">
                <img src="${e.imagem}" alt="${e.titulo}">
                <div class="card-conteudo">
                    <span class="tag-projeto">${e.tag}</span>
                    <h3>${e.titulo}</h3>
                    <p>${e.descricao}</p>
                    <a href="${e.link}" class="link-saibamais">Saiba mais</a>
                </div>
            </article>
        `}return{init:function o(){let a=document.querySelector("#projetos-container");a&&(a.innerHTML=e.map(t).join(""),console.log("Projetos carregados com sucesso."))}}}(),ModGraficos={init:function e(){let t=document.body.classList.contains("dark-mode")?"#fff":"#ffffffff",o=document.getElementById("distribuicao-recursos"),a=document.getElementById("evolucao-voluntarios");o&&new Chart(o,{type:"doughnut",data:{labels:["A\xe7\xf5es Diretas","Custos Operacionais"],datasets:[{data:[85,15],backgroundColor:["#36A2EB","#FFCE56"]}]},options:{plugins:{legend:{labels:{color:t}},title:{display:!0,text:"Distribui\xe7\xe3o de Recursos",color:t}}}}),a&&new Chart(a,{type:"line",data:{labels:["2020","2021","2022","2023","2024"],datasets:[{label:"Volunt\xe1rios",data:[120,250,400,650,900],borderColor:"#4BC0C0",backgroundColor:"rgba(75,192,192,0.2)",fill:!0,tension:.3}]},options:{plugins:{title:{display:!0,text:"Crescimento de Volunt\xe1rios",color:t},legend:{labels:{color:t}}},scales:{y:{ticks:{color:t},grid:{color:"rgba(255,255,255,0.2)"}},x:{ticks:{color:t},grid:{color:"rgba(255,255,255,0.2)"}}}}}),console.log("Gr\xe1ficos renderizados.")}},ModAudio=function(){let e,t;function o(){e&&(e.paused?(e.play(),t.textContent="⏸️"):(e.pause(),t.textContent="▶️"))}function a(){t&&(t.textContent="▶️")}return{init:function r(){e=document.getElementById("meuPodcast"),t=document.querySelector(".play-button"),e&&t&&(t.addEventListener("click",o),e.addEventListener("ended",a),t.textContent=e.paused?"▶️":"⏸️",console.log("Player de \xe1udio pronto."))}}}(),ModCEP=function(){async function e(e){let t=e.replace(/\D/g,"");if(8!==t.length)return{erro:!0,mensagem:"CEP inv\xe1lido."};try{let o=await fetch(`https://viacep.com.br/ws/${t}/json/`);if(!o.ok)return{erro:!0,mensagem:`Erro ${o.status}`};let a=await o.json();if(a.erro)return{erro:!0,mensagem:"CEP n\xe3o encontrado."};return{logradouro:a.logradouro,bairro:a.bairro,cidade:a.localidade,uf:a.uf}}catch(r){return console.error("Falha na conex\xe3o com a API de CEP.",r),{erro:!0,mensagem:"Falha na conex\xe3o."}}}return{init:function e(){console.log("M\xf3dulo de CEP ativo.")},buscar:e}}(),ModSPA=function(){function e(e){let t=e.split("?")[0].split("#")[0],o=t.match(/([^/]+\.html)$/i);return o?o[1].toLowerCase():"index.html"}async function t(e){let t=document.querySelector("#main-content");if(t)try{let a=await fetch(e);if(!a.ok)throw Error("Erro ao carregar p\xe1gina.");let r=await a.text(),n=new DOMParser().parseFromString(r,"text/html"),i=n.querySelector("main");if(!i)throw Error("Main n\xe3o encontrada.");t.innerHTML=i.innerHTML,window.history.pushState(null,"",e),o(e)}catch(l){console.error("Erro ao carregar SPA:",l),window.location.href=e}}function o(o){let a=e(o);switch(console.log(`P\xe1gina carregada: ${a}`),a){case"painel.html":ModAuth?.estaLogado()?(ModPainel.init(),ModGraficos.init()):(t("index.html"),alert("Acesso negado. Fa\xe7a login."));break;case"login.html":ModAuth?.initLogin();break;case"projetos.html":ModTemplates.init();break;case"transparencia.html":ModGraficos.init();break;case"sobre.html":ModAudio.init();break;case"chat.html":ModChat.init();break;case"voluntariado.html":ModCEP.init(),ModValidacao.init()}window.scrollTo(0,0)}return{init:function e(){let a=document.querySelectorAll("nav a[href$='.html']");a.forEach(e=>e.addEventListener("click",o=>{o.preventDefault(),t(e.getAttribute("href"))})),window.onpopstate=()=>t(window.location.pathname),o(window.location.href)},carregar:t,nomeArquivo:e}}(),ModValidacao=function(){let e={cep:"#cep",end:"#endereco",bai:"#bairro",cid:"#cidade",uf:"#uf"};function t(e,t){let o=e.closest("div");if(!o)return;let a=o.querySelector(".aviso-erro");a||((a=document.createElement("span")).className="aviso-erro",o.appendChild(a)),a.textContent=t,e.classList.add("erro")}function o(e){e.classList.remove("erro");let t=e.closest("div")?.querySelector(".aviso-erro");t&&t.remove()}function a(e){let a=e.id,r=e.value.trim();return(o(e),e.required&&""===r)?(t(e,"Campo obrigat\xf3rio"),!1):"nome"===a&&r.length<5?(t(e,"M\xednimo 5 caracteres"),!1):"email"!==a||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?"telefone"===a&&r.replace(/\D/g,"").length<10?(t(e,"Telefone inv\xe1lido"),!1):"cep"!==a||8===r.replace(/\D/g,"").length||(t(e,"CEP inv\xe1lido"),!1):(t(e,"E-mail inv\xe1lido"),!1)}async function r(){let a=document.querySelector(e.cep);if(!a)return;let r=a.value.replace(/\D/g,"");if(o(a),8===r.length){let n=await ModCEP.buscar(r);if(n.erro)return t(a,n.mensagem);document.querySelector(e.end).value=n.logradouro||"",document.querySelector(e.bai).value=n.bairro||"",document.querySelector(e.cid).value=n.cidade||"",document.querySelector(e.uf).value=n.uf||""}}function n(e){e.preventDefault();let t=e.target,o=t.querySelectorAll("input[required], select[required], textarea[required]"),r=Array.from(o).every(a);if(!r)return alert("Verifique os campos em vermelho.");let n={nome:t.nome.value,email:t.email.value,telefone:t.telefone.value,cep:t.cep.value,area:t.areaInteresse?.selectedOptions[0]?.text||"N\xe3o especificado",tipo:t.tipoInscricao?.value||"N\xe3o especificado",cidade:t.cidade?.value||""};ModStorage.salvarNovo(n);let i=document.querySelector("#main-content");i.innerHTML=`<div class="sucesso-inscricao"><h2>Inscri\xe7\xe3o Recebida!🎉</h2><p>Obrigado, <strong>${n.nome}</strong>!</p></div>`}return{init:function t(){let o=document.querySelector(".forminscricao");if(!o)return;o.onsubmit=n,o.querySelectorAll("input, select, textarea").forEach(e=>e.onblur=()=>a(e));let i=document.querySelector(e.cep);i&&(i.onblur=r,i.oninput=e=>{let t=e.target.value.replace(/\D/g,"").slice(0,8);e.target.value=t.length>5?`${t.slice(0,5)}-${t.slice(5)}`:t})}}}(),ModStorage=function(){let e="reageBrasilVoluntarios";function t(){try{let t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(o){return console.error("Erro ao carregar volunt\xe1rios:",o),[]}}return{carregar:t,salvarNovo:function o(a){let r=t();return a.id=Date.now(),a.dataCadastro=new Date().toLocaleDateString("pt-BR"),r.push(a),localStorage.setItem(e,JSON.stringify(r)),console.log("Volunt\xe1rio salvo:",a),r}}}(),ModDarkMode=function(){let e="darkModeEnabled",t="altoContrasteEnabled",o="dark-mode-toggle";function a(e){let t=document.body,a=document.getElementById(o);t.classList.toggle("dark-mode",e),a&&(a.textContent=e?"☀️":"\uD83C\uDF19");let r=ModSPA.nomeArquivo(window.location.href);"transparencia.html"===r&&ModGraficos.init()}function r(){let a=document.body,r=a.classList.toggle("alto-contraste");if(localStorage.setItem(t,r),r&&a.classList.contains("dark-mode")){localStorage.setItem(e,"false"),a.classList.remove("dark-mode");let n=document.getElementById(o);n&&(n.textContent="\uD83C\uDF19")}let i=ModSPA.nomeArquivo(window.location.href);"transparencia.html"===i&&ModGraficos.init(),console.log("Alto Contraste: ",r?"Ativo":"Inativo")}return{init:function n(){let i=document.getElementById(o),l=document.getElementById("toggle-alto-contraste"),s=localStorage.getItem(e),c=localStorage.getItem(t),d=window.matchMedia("(prefers-color-scheme: dark)").matches,u="true"===s||null===s&&d;"true"===c&&(document.body.classList.add("alto-contraste"),u=!1),a(u),i&&i.addEventListener("click",()=>{let o=!document.body.classList.contains("dark-mode");o&&document.body.classList.contains("alto-contraste")&&(document.body.classList.remove("alto-contraste"),localStorage.setItem(t,"false")),localStorage.setItem(e,o),a(o)}),l&&l.addEventListener("click",r),console.log("Modo escuro e Contraste inicializados.")}}}(),ModPainel={init:function e(){let t=document.querySelector("#painel-voluntarios");if(!t)return;let o=ModStorage.carregar();t.innerHTML=function e(t){if(0===t.length)return'<p class="aviso-vazio">Nenhum volunt\xe1rio cadastrado.</p>';let o=t.map(e=>`
            <tr>
                <td>${e.nome}</td>
                <td>${e.email}</td>
                <td>${e.area}</td>
                <td>${e.dataCadastro||"N/A"}</td>
            </tr>`).join("");return`<table><thead><tr><th>Nome</th><th>E-mail</th><th>\xc1rea</th><th>Data Cadastro</th></tr></thead><tbody>${o}</tbody></table>`}(o),console.log(`Painel carregado com ${o.length} volunt\xe1rio(s).`)}},ModAuth=function(){let e="usuarioLogado";function t(t){localStorage.setItem(e,JSON.stringify(t)),o(!0),console.log("Usu\xe1rio logado:",t.nome)}function o(e){let t=document.getElementById("btn-login"),o=document.getElementById("btn-logout");t&&(t.style.display=e?"none":"block"),o&&(o.style.display=e?"block":"none")}function a(e){e.preventDefault();let o=document.getElementById("email-login"),a=document.getElementById("senha-login");if(!o||!a)return;let r=o.value.trim(),n=a.value.trim();"admin@reage.com"===r&&""!==n?(t({nome:"Administrador",email:r}),ModSPA.carregar("painel.html")):(alert("Falha no login. Use 'admin@reage.com' e qualquer senha."),a.value="")}return{logar:t,deslogar:function t(){localStorage.removeItem(e),o(!1),ModSPA.carregar("index.html")},estaLogado:function t(){return null!==localStorage.getItem(e)},initLogin:function e(){let t=document.getElementById("login-form");t&&t.addEventListener("submit",a)},alternarBotoes:o}}();document.addEventListener("DOMContentLoaded",()=>{ModDarkMode.init(),ModAuth.alternarBotoes(ModAuth.estaLogado()),ModSPA.init(),console.log("Aplica\xe7\xe3o Reage Brasil Inicializada.")});